<form [formGroup]="checkoutFormGroup" (ngSubmit)="onsubmit()">
    <div formGroupName="customer" class="sub-form">
        <h3>Customer</h3>

        <div class="form-group">
            <label>First Name</label>
            <input class="form-control" formControlName="firstName" type="text">
            <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)" class="alert alert-danger mt-1">
                <div *ngIf="firstName.errors.required || firstName.errors.notOnlyWhitespace">
                    First Name is required
                </div>
                <div *ngIf="firstName.errors.minlength">
                    First Name is must be at least 2 characters long
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>Last Name</label>
            <input class="form-control" formControlName="lastName" type="text">
            <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)" class="alert alert-danger mt-1">
                <div *ngIf="lastName.errors.required || lastName.errors.notOnlyWhitespace">
                    Last Name is required
                </div>
                <div *ngIf="lastName.errors.minlength">
                    Last Name is must be at least 2 characters long
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>Email</label>
            <input class="form-control" formControlName="email" type="email">
            <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger mt-1">
                <div *ngIf="email.errors.required">
                    Email is required
                </div>
                <div *ngIf="email.errors.pattern">
                   Email must be a valid email address format
                </div>
            </div>
        </div>

    </div>

    <div formGroupName="shippingAddress" class="sub-form">
        <h3>Shipping Address</h3>

        <div class="form-group">
            <label>Country</label>
            <select formControlName="country" class="form-select" (change)="getState('shippingAddress')">
                <option *ngFor="let country of countries" [ngValue]="country">
                    {{country.name}}
                </option>
            </select>
            <div *ngIf="shippingAddressCountry.invalid && (shippingAddressCountry.dirty || shippingAddressCountry.touched)" class="alert alert-danger mt-1">
                <div *ngIf="shippingAddressCountry.errors.required">
                    Country is required
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>Street</label>
            <input class="form-control" formControlName="street" type="text">
            <div *ngIf="shippingAddressStreet.invalid && (shippingAddressStreet.dirty || shippingAddressStreet.touched)" class="alert alert-danger mt-1">
                <div *ngIf="shippingAddressStreet.errors.required || shippingAddressStreet.errors.notOnlyWhitespace">
                    Street is required
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>City</label>
            <input class="form-control" formControlName="city" type="email">
            <div *ngIf="shippingAddressCity.invalid && (shippingAddressCity.dirty || shippingAddressCity.touched)" class="alert alert-danger mt-1">
                <div *ngIf="shippingAddressCity.errors.required || shippingAddressCity.errors.notOnlyWhitespace">
                    City is required
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>State</label>
            <select formControlName="state" class="form-select">
                <option *ngFor="let state of shippingAddressStates" [ngValue]="state">
                    {{state.name}}
                </option>
            </select>
            <div *ngIf="shippingAddressState.invalid && (shippingAddressState.dirty || shippingAddressState.touched)" class="alert alert-danger mt-1">
                <div *ngIf="shippingAddressState.errors.required">
                    State is required
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>zipcode</label>
            <input class="form-control" formControlName="zipCode" type="email">
            <div *ngIf="shippingAddressZipCode.invalid && (shippingAddressZipCode.dirty || shippingAddressZipCode.touched)" class="alert alert-danger mt-1">
                <div *ngIf="shippingAddressZipCode.errors.required || shippingAddressZipCode.errors.notOnlyWhitespace">
                   ZipCode is required
                </div>
            </div>
        </div>

    </div>


    <div>
        <input type="checkbox" (change)="copyShippingAddressToBillingAddress($event)">
        <span>Billing Address same as billing Address</span>
    </div>


    <div formGroupName="billingAddress" class="sub-form">
        <h3>billing Address</h3>

        <div class="form-group">
            <label>Country</label>
            <select formControlName="country" class="form-select" (change)="getState('billingAddress')">
                <option *ngFor="let country of countries" [ngValue]="country">
                    {{country.name}}
                </option>
            </select>
            <div *ngIf="billingAddressCountry.invalid && (billingAddressCountry.dirty || billingAddressCountry.touched)" class="alert alert-danger mt-1">
                <div *ngIf="billingAddressCountry.errors.required">
                    Country is required
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>Street</label>
            <input class="form-control" formControlName="street" type="text">
            <div *ngIf="billingAddressStreet.invalid && (billingAddressStreet.dirty || billingAddressStreet.touched)" class="alert alert-danger mt-1">
                <div *ngIf="billingAddressStreet.errors.required || billingAddressStreet.errors.notOnlyWhitespace">
                    Street is required
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>City</label>
            <input class="form-control" formControlName="city" type="email">
            <div *ngIf="billingAddressCity.invalid && (billingAddressCity.dirty || billingAddressCity.touched)" class="alert alert-danger mt-1">
                <div *ngIf="billingAddressCity.errors.required || billingAddressCity.errors.notOnlyWhitespace">
                    City is required
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>State</label>
            <select formControlName="state" class="form-select">
                <option *ngFor="let state of billingAddressStates" [ngValue]="state">
                    {{state.name}}
                </option>
            </select>
            <div *ngIf="billingAddressState.invalid && (billingAddressState.dirty || billingAddressState.touched)" class="alert alert-danger mt-1">
                <div *ngIf="billingAddressState.errors.required">
                    State is required
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>zipcode</label>
            <input class="form-control" formControlName="zipCode" type="email">
            <div *ngIf="billingAddressZipCode.invalid && (billingAddressZipCode.dirty || billingAddressZipCode.touched)" class="alert alert-danger mt-1">
                <div *ngIf="billingAddressZipCode.errors.required || billingAddressZipCode.errors.notOnlyWhitespace">
                   ZipCode is required
                </div>
            </div>
        </div>

    </div>

    <div formGroupName="creditCard" class="sub-form">
        <h3>Credit Card</h3>

        <div class="form-group">
            <label>Card Type</label>
            <select formControlName="cardType" class="form-select">
                <option>Visa</option>
                <option>Master</option>
            </select>
            <div *ngIf="creditCardType.invalid && (creditCardType.dirty || creditCardType.touched)" class="alert alert-danger mt-1">
                <div *ngIf="creditCardType.errors.required">
                    Card Type is required
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>Name on Card</label>
            <input class="form-control" formControlName="nameOnCard" type="text">
            <div *ngIf="creditCardNameOnCard.invalid && (creditCardNameOnCard.dirty || creditCardNameOnCard.touched)" class="alert alert-danger mt-1">
                <div *ngIf="creditCardNameOnCard.errors.required || creditCardNameOnCard.errors.notOnlyWhitespace">
                   Name is required
                </div>

                <div *ngIf="creditCardNameOnCard.errors.minlength">
                   Name must be at least 2 characters long.
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>Card Number</label>
            <input class="form-control" formControlName="cardNumber" type="text">

            <div *ngIf="creditCardNumber.invalid && (creditCardNumber.dirty || creditCardNumber.touched)" class="alert alert-danger mt-1">
                <div *ngIf="creditCardNumber.errors.required || creditCardNumber.errors.notOnlyWhitespace">
                   Card Number is required
                </div>

                <div *ngIf="creditCardNumber.errors.pattern">
                   Card Number must be 16 digits long
                </div>
            </div>

        </div>

        <div class="form-group">
            <label>Security Code</label>
            <input class="form-control" formControlName="securityCode" type="text">
            <div *ngIf="creditCardSecurityCode.invalid && (creditCardSecurityCode.dirty || creditCardSecurityCode.touched)" class="alert alert-danger mt-1">
            <div *ngIf="creditCardSecurityCode.errors.required || creditCardSecurityCode.errors.notOnlyWhitespace">
                Security Code  is required
             </div>

             <div *ngIf="creditCardSecurityCode.errors.pattern">
                Card Number must be 3 digits long
             </div>
             </div>
        </div>


        <div class="form-group">
            <label>Expiratioin Month</label>
            <select formControlName="expirationMonth" class="form-select">
                <option *ngFor="let month of creditCardMonths">
                    {{month}}
                </option>
            </select>
        </div>

        <div class="form-group">
            <label>Expiratioin Year</label>
            <select formControlName="expirationYear" class="form-select" (change)="handleMonthsAndYears()">
                <option *ngFor="let year of creditCardYears">
                    {{year}}
                </option>
            </select>
        </div>

    </div>


    <div class="sub-form">

        <p>TotalQuantity: {{totalQuantity}}</p>
        <p>billing : FREE</p>
        <p>Total Price: {{totalPrice}}</p>
        <button type="submit" class="btn btn-success">Purchase</button>
    </div>


</form>

